### 代码重构



##### 代码的坏味道

1. 重复代码：将出现超过1次以上的重复代码抽取出来，如果在同一个类中抽出来一个API，如果在2个关联的类中，则抽出方法放在其共同的父类中，如果是2个无关联的类，就将该函数抽出到共工类或者单独放到一个类中。
2. 长函数：将长函数进行分解，根据功能结构分解成子函数，一般有注释的地方可以抽取出来，条件判断、循环都可以提炼到一个独立的函数中。
3. 过大的类：将大的类进行拆分，相关的功能模块抽取到新的模块类中，主类通过调用模块类的接口实现功能。
4. 过长的参数列表：可以用对象替代参数列表
5. 将类中因功能扩展或者其他原因而需要修改的部分提炼出来，放在一个新的类中，并且需要修改的代码不应该分散放在多个类中，应把一系列相关行为集中地放在同一个类，便于管理和修改。
6. 如果一个类A中的函数，大部分调用接口都在另一个类B中，那么这个函数最好挪到B类中。
7. 如果几个相同的字段出现在不同的类中，或者不同的参数列表中，那么应该为这几个字段新建一个类。